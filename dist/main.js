(()=>{"use strict";const e=function({timing:e,draw:t,duration:n}){const o=performance.now();requestAnimationFrame((function r(a){let c=(a-o)/n;c>1&&(c=1);const l=e(c);t(l),c<1&&requestAnimationFrame(r)}))};function t(e,t="+7 (___) ___-__-__"){const n=document.querySelectorAll(e);function o(e){const n=e.keyCode,o=t,r=o.replace(/\D/g,""),a=this.value.replace(/\D/g,"");let c=0,l=o.replace(/[_\d]/g,(function(e){return c<a.length?a.charAt(c++)||r.charAt(c):e}));c=l.indexOf("_"),-1!=c&&(l=l.slice(0,c));let s=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");s=new RegExp("^"+s+"$"),(!s.test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=l),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of n)e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)}t("селектор элементов","маска, если маску не передать то будет работать стандартная +7 (___) ___-__-__");const n=t;(e=>{const t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function r(){const t=(new Date(e).getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/60/60),minutes:o,seconds:n}}function a(){const e=r();t.textContent=e.hours,n.textContent=e.minutes,o.textContent=e.seconds,e.hours<10&&(t.textContent="0"+e.hours),e.minutes<10&&(n.textContent="0"+e.minutes),e.seconds<10&&(o.textContent="0"+e.seconds),e.timeRemaining>0&&setTimeout(a,1e3)}r().timeRemaining>0?(a(),setInterval(a,1e3)):(clearInterval(2),t.textContent="00",n.textContent="00",o.textContent="00")})("23 feb 2021"),(()=>{const e=document.querySelector("menu"),t=document.querySelector(".close-btn");document.addEventListener("click",(n=>{const o=n.target;o===t||o.closest(".active-menu ul")||o.closest(".menu")?e.classList.toggle("active-menu"):o!==e&&e.classList.remove("active-menu")}))})(),(()=>{const t=document.querySelector(".popup");document.querySelectorAll(".popup-btn").forEach((n=>{n.addEventListener("click",(()=>{t.style.display="block",window.innerWidth>768&&(e({duration:500,timing:e=>e,draw(e){t.style.opacity=e}}),t.style.visibility="visible")}))}));const n=()=>{window.innerWidth>768?(window.setTimeout((()=>t.style.visibility="hidden"),500),e({duration:500,timing:e=>e,draw(e){t.style.opacity=1-e}})):t.style.display="none"};t.addEventListener("click",(e=>{let t=e.target;t.classList.contains("popup-close")?n():(t=t.closest(".popup-content"),t||n())}))})(),(()=>{const e=document.querySelectorAll('a[href*="#"');for(const t of e)t.href.split("#")[1].length>0&&t.addEventListener("click",(e=>{e.preventDefault();const n=t.getAttribute("href"),o=document.querySelector(n);if(o){const e=o.offsetTop;window.scrollTo({top:e,behavior:"smooth"})}}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,r)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(r)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),n=document.querySelector(".portfolio-dots");let o,r,a=0;e.forEach((()=>{const e=document.createElement("li");e.classList.add("dot"),n.append(e)})),r=document.querySelectorAll(".dot"),r[a].classList.add("dot-active");const c=(e,t,n)=>{e[t].classList.remove(n)},l=(e,t,n)=>{e[t].classList.add(n)},s=()=>{c(e,a,"portfolio-item-active"),c(r,a,"dot-active"),a++,a>=e.length&&(a=0),l(e,a,"portfolio-item-active"),l(r,a,"dot-active")},i=(e=2e3)=>{o=setInterval(s,e)};t.addEventListener("click",(t=>{t.preventDefault();let n=t.target;n.matches(".portfolio-btn, .dot")&&(c(e,a,"portfolio-item-active"),c(r,a,"dot-active"),n.matches("#arrow-right")?a++:n.matches("#arrow-left")?a--:n.matches(".dot")&&r.forEach(((e,t)=>{e===n&&(a=t)})),a>=e.length&&(a=0),a<0&&(a=e.length-1),l(e,a,"portfolio-item-active"),l(r,a,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)})(),(()=>{const e=document.querySelectorAll(".command__photo");e.forEach((e=>{e.addEventListener("mouseover",(e=>{const t=e.target;[t.src,t.dataset.img]=[t.dataset.img,t.src]}))})),e.forEach((e=>{e.addEventListener("mouseout",(e=>{const t=e.target;[t.dataset.img,t.src]=[t.src,t.dataset.img]}))}))})(),document.querySelector(".calc-block").addEventListener("input",(e=>{const t=e.target;t.matches('[type="text"]')&&(t.value=t.value.replace(/\D/g,""))})),(()=>{const e=document.querySelectorAll('[name="user_name"]'),t=document.querySelectorAll('[name="user_message"]'),n=e=>{const t=e.target;t.value=t.value.replace(/[^а-я-ё\-\s]/gi,"")};e.forEach((e=>{e.addEventListener("input",n),e.addEventListener("blur",(e=>{const t=e.target;t.value=t.value.replace(/ +/g," ").trim(),t.value=t.value.replace(/([А-ЯЁ])/g,(e=>e.toLowerCase())),t.value=t.value.replace(/(( |^)[а-яё])(?=[а-яё])/g,(e=>e.toUpperCase()))}))})),t.forEach((e=>{e.addEventListener("input",n),e.addEventListener("blur",(e=>{const t=e.target;t.value=t.value.replace(/^[ -]*|( |-)(?=\1)|[ -]*$/g,"").replace(/ +/g," ").trim()}))}))})(),document.querySelectorAll('[name="user_email"]').forEach((e=>{e.addEventListener("input",(e=>{const t=e.target;t.value=t.value.replace(/[^a-z@\-_.!~*']/gi,"")})),e.addEventListener("keypress",(e=>{"Space"===e.code&&e.preventDefault()})),e.addEventListener("blur",(e=>{const t=e.target;t.value=t.value.replace(/^[ -]*|( |-)(?=\1)|[ -]*$/g,"").replace(/ +/g," ").trim()}))})),document.querySelectorAll('[name="user_phone"]').forEach((e=>{e.addEventListener("input",(e=>{const t=e.target;t.value=t.value.replace(/[^\-()\d]/g,"")}))})),((t=100)=>{const n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),l=document.getElementById("total");n.addEventListener("change",(n=>{const s=n.target;(s.matches("select")||s.matches("input"))&&(()=>{let n=0,s=1,i=1;const u=o.options[o.selectedIndex].value,d=+r.value;c.value>1&&(s+=(c.value-1)/10),a.value&&a.value<5?i*=2:a.value&&a.value<10&&(i*=1.5),u&&d&&(n=t*u*d*s*i),e({duration:500,timing:e=>e,draw(e){l.textContent=Math.floor(e*n)}})})()}))})(100),document.querySelectorAll("form").forEach((e=>{(e=>{const t=document.createElement("div");t.style.cssText="\n        font-size: 1.2rem;\n        color: #fff;\n    ";const n=e=>{e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")&&e.nextElementSibling.remove(),e.style.border="none"},o=e=>{if(e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error"))return;e.style.cssText="border: 1px solid tomato";const t=document.createElement("div");t.classList.add("validator-error"),"tel"===e.type?t.insertAdjacentHTML("afterbegin","Введите номер в формате <br> +7 (800) 900-77-66"):"email"===e.type&&t.insertAdjacentHTML("afterbegin","Введите email в формате <br> email@domain.ru"),t.style.cssText="\n                color: tomato;\n                font-size: 1.2rem;\n            ",e.insertAdjacentElement("afterend",t)};e.addEventListener("submit",(r=>{const a=e.querySelector('[type="tel"]'),c=e.querySelector('[type="email"]'),l=/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{10}$/,s=/^\w+@\w+\.\w{2,}$/;r.preventDefault(),e.append(t);const i=new FormData(e),u={};i.forEach(((e,t)=>{u[t]=e})),l.test(a.value)?n(a):o(a),s.test(c.value)?n(c):o(c),l.test(a.value)&&s.test(c.value)&&(t.innerHTML='\n            <div class="container-box">\n                <div class="box"></div>\n                <div class="box"></div>\n                <div class="box"></div>\n                <div class="box"></div>\n                <div class="box"></div>\n            </div>\n            ',(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(u).then((n=>{if(200!==n.status)throw new Error("status network not 200");e.reset(),t.innerHTML="Спасибо! Мы скоро с Вами свяжемся"})).catch((e=>{t.innerHTML="Что то пошло не так...",console.error(e)})),setTimeout((()=>{t.parentNode.removeChild(t)}),7e3))})),(e=>{const t=e.querySelector('[type="tel"]'),n=e.querySelector('[type="email"]'),o=e.querySelector('[type="text"]'),r=e.querySelector('[placeholder="Ваше сообщение"]');t.addEventListener("input",(e=>{const t=e.target;t.value=t.value.replace(/[^+0-9]/g,"")})),n.addEventListener("input",(e=>{const t=e.target;t.value=t.value.replace(/[^@a-zA-Z0-9.-_]/g,"")})),o.addEventListener("input",(e=>{const t=e.target;t.value=t.value.replace(/[^а-яА-Я ]/g,"")})),r&&r.addEventListener("input",(e=>{const t=e.target;t.value=t.value.replace(/[^а-яА-Я ,.!]/g,"")}))})(e)})(e)})),n("input[type=tel]")})();